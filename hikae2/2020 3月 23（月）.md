---
Created: 2020-03-23T04:03
Updated: 2020-03-24T11:01
---
```Plain
user_a = FactoryBot.create(:user, name: "name_1", email: "sample_mail1@sample.com")
```

＞ファクトリーボットで変数を仕込んでユーザーを量産する記述をしているのに、rspec側で、nameやmailを新たに書き込もうとしているから連絡先重複で止まる。

ファクトリーボット側でテストデータを作るなら、

```Plain
user_a = FactoryBot.create(:user)
```

これだけで呼び出しができる。

```Plain
bin/rails db:environment:set RAILS_ENV=test
```

わざわざこんな、テストテーブルに切り替え＞テーブル削除＞テーブル再作成＞開発テーブルに戻す、というコマンドは不要。

```Plain
rails db:migrate:reset RAILS_ENV=test
```

このように、いつものテーブル再作成でテスト環境を指定するオプションだけでテスト用データベースはリセットされる。

12:16

```Plain
task_a = FactoryBot.create(:task, user: user_a)
```

＞引数としてアソシエーション先のユーザー名を指定してやらないと、factory生成されたテストデータが紐付かない。

```Plain
task_list_content = all('.task_list_content')
         expect(task_list_content[0]).to have_content '4'
         expect(task_list_content[1]).to have_content '3'
```

＞同じ配列名で降順昇順を見ているから、上書きされて値がなくなっていたのである。

18:29

Task.indexの検索ボタン異常。

開発環境では問題なく動くのにテスト環境でのみ不発。メンターサイトウ氏も2時間かけたがお手上げ。

クリックしてもアクションが発動しない。

検索機能は、モデルの側でスコープ機能にまとめてテストするか？

テストの動作確認には、オブジェクトの名前を取得し、.clickなどのメソッドを書いてターミナル側から画面を操作し様子を見るのが基本、らしい。

20:13

require 'rails_helper'が無いと何が起きるか？

visitもrootもみてくれない。configでそれらを定義しているモジュールだかのパスを通しているので。

---

けんちの重体説。

めんどくさいなあ、というのが薄情な自分の気持だ。だが見舞いにくらいいってやろうか

2020 3月 23（月）,04:03

俺は作品が欲しいのではなかったか？　だからWeb技術を学びに来たのではなかったか？時計を眺める生活はウンザリだったのではないか？

しかし、商業の開発において好きなビジネスなんて大して無いのだ。作りたい、助けたい業界なんてあるのか。テーラーメイドでやる気がなかったのは、ゴルフが嫌いだったからだ。

だったら、日頃から自分で使っているサービスの会社に自分の得意分野で貢献できることを売り込んでみてはどうか。失敗すれば自分の生活に響く、という動機がある。

2020 3月 23（月）,09:44